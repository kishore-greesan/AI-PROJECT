# 🚀 Deployment Guide

This guide will help you deploy the Employee Performance Management System to production.

## 📋 Prerequisites

- GitHub account
- Vercel account (for frontend)
- Railway/Render account (for backend)
- Node.js and npm installed
- Python 3.12 installed

## 🏗️ Architecture

```
Frontend (React + Vite) → Vercel
Backend (FastAPI) → Railway/Render
Database → PostgreSQL (Railway/Render)
```

## 🎯 Step-by-Step Deployment

### Step 1: Prepare Your Repository

1. **Push your code to GitHub:**
   ```bash
   git add .
   git commit -m "Prepare for deployment"
   git push origin main
   ```

### Step 2: Deploy Backend (Railway - Recommended)

1. **Install Railway CLI:**
   ```bash
   npm install -g @railway/cli
   ```

2. **Login to Railway:**
   ```bash
   railway login
   ```

3. **Initialize Railway project:**
   ```bash
   cd backend
   railway init
   ```

4. **Deploy to Railway:**
   ```bash
   railway up
   ```

5. **Set environment variables in Railway dashboard:**
   - `DATABASE_URL`: Will be auto-generated by Railway
   - `JWT_SECRET_KEY`: Generate a secure key (e.g., `openssl rand -hex 32`)
   - `DEBUG`: `False`

6. **Get your backend URL** (e.g., `https://your-app.railway.app`)

### Step 3: Deploy Frontend (Vercel)

1. **Install Vercel CLI:**
   ```bash
   npm install -g vercel
   ```

2. **Login to Vercel:**
   ```bash
   vercel login
   ```

3. **Deploy to Vercel:**
   ```bash
   cd frontend
   vercel --prod
   ```

4. **Set environment variables in Vercel dashboard:**
   - `VITE_API_URL`: Your Railway backend URL (e.g., `https://your-app.railway.app/api`)

### Step 4: Alternative Deployment Methods

#### Frontend - GitHub + Vercel

1. **Connect GitHub to Vercel:**
   - Go to [vercel.com](https://vercel.com)
   - Import your GitHub repository
   - Set root directory to `frontend`
   - Set build command to `npm run build`
   - Set output directory to `dist`

2. **Set environment variables:**
   - `VITE_API_URL`: Your backend URL

#### Backend - Render

1. **Create a new Web Service on Render:**
   - Connect your GitHub repository
   - Set root directory to `backend`
   - Set build command: `pip install -r requirements.txt`
   - Set start command: `uvicorn app.main:app --host 0.0.0.0 --port $PORT`

2. **Set environment variables:**
   - `DATABASE_URL`: Your PostgreSQL connection string
   - `JWT_SECRET_KEY`: Secure secret key
   - `DEBUG`: `False`

## 🔧 Environment Variables

### Frontend (Vercel)
```env
VITE_API_URL=https://your-backend-url.railway.app/api
```

### Backend (Railway/Render)
```env
DATABASE_URL=postgresql://user:password@host:port/database
JWT_SECRET_KEY=your-secure-secret-key
DEBUG=False
```

## 🗄️ Database Setup

### Railway (Automatic)
Railway automatically creates a PostgreSQL database for you.

### Manual PostgreSQL Setup
1. Create a PostgreSQL database
2. Update `DATABASE_URL` environment variable
3. Run migrations: `alembic upgrade head`

## 🔍 Testing Your Deployment

1. **Test Backend:**
   ```bash
   curl https://your-backend-url.railway.app/api/health
   ```

2. **Test Frontend:**
   - Visit your Vercel URL
   - Try logging in with test credentials

## 🚨 Troubleshooting

### Common Issues

1. **CORS Errors:**
   - Update `CORS_ORIGINS` in `backend/app/config/settings.py`
   - Add your Vercel domain to the list

2. **Database Connection Issues:**
   - Check `DATABASE_URL` format
   - Ensure database is accessible

3. **Build Failures:**
   - Check Node.js version (use 18+)
   - Check Python version (use 3.12)

### Debug Commands

```bash
# Test backend locally
cd backend
uvicorn app.main:app --reload

# Test frontend locally
cd frontend
npm run dev

# Check build
cd frontend
npm run build
```

## 📞 Support

If you encounter issues:
1. Check the deployment logs in your platform dashboard
2. Verify environment variables are set correctly
3. Test locally first before deploying

## 🎉 Success!

Once deployed, your application will be available at:
- **Frontend**: `https://your-app.vercel.app`
- **Backend**: `https://your-app.railway.app`

Remember to update the `VITE_API_URL` in your frontend environment variables to point to your backend URL! 